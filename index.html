<!-- <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Contact Form</title>
</head>
<body>
    <form action="send.php" method="post">
       
       Email <input type="email" name="email" id="email" value="">
        <br>
        Subject <input type="text" name="subject" id="email" value="">
        <br>
        Message <input type="text" name="message" id="email" value=""><br>
        <button type="submit" name="send">Send</button>
        <br><br>
    </form>
</body>
</html> -->

<!-- <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Contact Form</title>
</head>
<body>
    <form action="send.php" method="post">
        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required>
        <br><br>
        <label for="subject">Subject:</label>
        <input type="text" name="subject" id="subject" required>
        <br><br>
        <label for="message">Message:</label>
        <textarea name="message" id="message" rows="5" cols="30" required></textarea>
        <br><br>
        <button type="submit" name="send">Send</button>
    </form>
    <?php if (isset($_GET['success'])): ?>
      <p>Your message was sent successfully!</p>
    <?php endif; ?>
</body>
</html> -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Contact Form</title>
</head>
<body>
    <form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post">
        <label for="name">Name:</label>
        <input type="text" name="name" id="name" value="<?php echo htmlspecialchars($name); ?>" required>
        <br><br>
        <label for="email">Email:</label>
        <input type="email" name="email" id="email" value="<?php echo htmlspecialchars($email); ?>" required>
        <br><br>
        <label for="message">Message:</label>
        <textarea name="message" id="message" rows="5" cols="30" required><?php echo htmlspecialchars($message); ?></textarea>
        <br><br>
        <input type="submit" name="submit" value="Submit">
        <br><br>
        <span><?php echo htmlspecialchars($response); ?></span>
    </form>

    <?php
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        // Email sending logic
        use PHPMailer\PHPMailer\PHPMailer;
        use PHPMailer\PHPMailer\Exception;
        
        require 'phpmailer/src/Exception.php';
        require 'phpmailer/src/PHPmailer.php';
        require 'phpmailer/src/SMTP.php';

        try {
            $mail = new PHPMailer(true);

            //Server settings
            $mail->isSMTP();
            $mail->Host = 'smtp.gmail.com';
            $mail->SMTPAuth = true;
            $mail->Username = 'office.consoleghana@gmail.com';
            $mail->Password = 'swcd juwy wlyf wtrl';
            $mail->SMTPSecure = 'tls';
            $mail->Port = 587;

            //Recipients
            $mail->setFrom($_POST['email'], $_POST['name']);
            $mail->addAddress('your-email@gmail.com', 'Receiver Name');

            //Content
            $mail->isHTML(true);
            $mail->Subject = 'New Contact Form Submission';
            $mail->Body    = "Name: {$_POST['name']}<br>Email: {$_POST['email']}<br>Message: {$_POST['message']}";
            $mail->AltBody = "Name: {$_POST['name']}\nEmail: {$_POST['email']}\nMessage: {$_POST['message']}";

            $mail->send();
            $response = 'Message has been sent';
        } catch (Exception $e) {
            $response = "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
        }
    } else {
        // Initialize variables
        $name = '';
        $email = '';
        $message = '';
        $response = '';
    }
    ?>
</body>
</html>